"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[368],{42368:function(e,t,o){o.r(t);var r=o(57437),n=o(2265),i=o(77691),a=o.n(i);o(60966);var l=o(89916);t.default=n.memo(e=>{let{data:t,onRegionSelect:o,yemenGeoJSON:i,setError:c}=e,p=(0,n.useRef)(null),u=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(console.log("LeafletMap component mounted or updated."),p.current||(console.log("Initializing Leaflet map..."),p.current=a().map("map").setView([15.552727,48.516388],6),a().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(p.current)),i){if(console.log("Adding GeoJSON layer to map..."),u.current&&p.current.removeLayer(u.current),!Array.isArray(t)||0===t.length){console.error("Data is undefined or not an array in LeafletMap:",t),c("No data available for the choropleth map.");return}let e=t.map(e=>parseFloat(e.avg_usdprice)).filter(e=>!isNaN(e)),r=l.ZP.scale("YlOrRd").domain([Math.min(...e),Math.max(...e)]);u.current=a().geoJSON(i,{style:e=>{let o=t.find(t=>t.region_id===e.properties.region_id),n=o?parseFloat(o.avg_usdprice):null;return{fillColor:null!==n?r(n).hex():"#ccc",weight:2,opacity:1,color:"white",fillOpacity:.7}},onEachFeature:(e,r)=>{r.on({click:()=>{console.log("Region clicked:",e.properties.region_id),o(e.properties.region_id)},mouseover:o=>{let r=o.target;r.setStyle({weight:5,color:"#666",dashArray:"",fillOpacity:.7});let n=t.find(t=>t.region_id===e.properties.region_id),i=n?parseFloat(n.avg_usdprice):"No data";r.bindTooltip("".concat(e.properties.region_name,"<br/>Value: ").concat(i)).openTooltip()},mouseout:e=>{let t=e.target;t.setStyle({weight:2,color:"white",dashArray:"",fillOpacity:.7}),t.closeTooltip()}})}}).addTo(p.current);let n=a().control({position:"bottomright"});n.onAdd=function(){let e=a().DomUtil.create("div","info legend"),t=r.colors(5),o=[];return t.forEach((e,n)=>{let i=Math.round(r.domain()[0]+(r.domain()[1]-r.domain()[0])*n/(t.length-1));o.push('<i style="background:'.concat(e,'"></i> ').concat(i))}),e.innerHTML=o.join("<br>"),e},n.addTo(p.current)}return()=>{console.log("LeafletMap component unmounting. Cleaning up..."),p.current&&(p.current.remove(),p.current=null)}},[t,o,i,c]),(0,r.jsx)("div",{id:"map",style:{height:"400px",width:"100%"}})})}}]);
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[353],{74353:function(t,e,r){r.r(e);var n=r(57437),a=r(2265),l=r(32123),c=r(17156);e.default=a.memo(t=>{let{data:e,selectedMarket:r,title:o,description:i}=t,s=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if(console.log("MarketConnectivityGraph component mounted or updated."),console.log("Data:",e),console.log("Selected Market:",r),!e||!s.current)return;let t=s.current;t.innerHTML="";let n=l.Ys(t).attr("width",800).attr("height",600),a=l.A4v().force("link",l.Fsl().id(t=>t.id).distance(150)).force("charge",l.q5i().strength(-300)).force("center",l.wqt(400,300)),c=Object.keys(e).map(t=>({id:t})),o=[];Object.entries(e).forEach(t=>{let[e,r]=t;r.forEach(t=>{o.push({source:e,target:t})})}),console.log("Nodes:",c),console.log("Links:",o);let i=l.sPX().scaleExtent([.5,2]).on("zoom",t=>{let{transform:e}=t;d.attr("transform",e)});n.call(i);let d=n.append("g"),f=d.selectAll(".link").data(o).enter().append("line").attr("class","link").attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",2),u=d.selectAll(".node").data(c).enter().append("g").attr("class","node").call(l.ohM().on("start",function(t,e){t.active||a.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}).on("drag",function(t,e){e.fx=t.x,e.fy=t.y}).on("end",function(t,e){t.active||a.alphaTarget(0),e.fx=null,e.fy=null}));u.append("circle").attr("r",8).attr("fill",t=>t.id===r?"#ff5722":"#2196f3"),u.append("text").attr("dx",12).attr("dy",".35em").text(t=>t.id).style("font-size","12px"),u.on("click",(t,e)=>{console.log("Node clicked:",e.id);let r=o.filter(t=>t.source.id===e.id||t.target.id===e.id).map(t=>t.source.id===e.id?t.target.id:t.source.id);u.select("circle").attr("fill",t=>t.id===e.id||r.includes(t.id)?"#ff5722":"#2196f3")}),a.nodes(c).on("tick",function(){f.attr("x1",t=>t.source.x).attr("y1",t=>t.source.y).attr("x2",t=>t.target.x).attr("y2",t=>t.target.y),u.attr("transform",t=>"translate(".concat(t.x,",").concat(t.y,")"))}),a.force("link").links(o),console.log("Graph rendering complete.")},[e,r]),(0,n.jsxs)(c.Z,{className:"market-connectivity-graph",children:[(0,n.jsx)("h3",{children:o}),(0,n.jsx)("p",{children:i}),(0,n.jsx)("svg",{ref:s})]})})}}]);